# ============================================
# APPLICATION CONFIGURATION
# ============================================
NODE_ENV=development
APP_NAME=haystack
APP_VERSION=0.0.1
PORT=3000
API_VERSION=v1
GLOBAL_PREFIX=api

# ============================================
# DATABASE CONFIGURATION
# ============================================
# Option 1: Use DATABASE_URL (recommended for production)
# DATABASE_URL=postgresql://user:password@localhost:5432/haystack

# Option 2: Use individual settings
# Database
DATABASE_HOST=localhost
DATABASE_PORT=5432
DATABASE_USERNAME=postgres
DATABASE_PASSWORD=postgres
DATABASE_NAME=haystack

DATABASE_SSL=false
DATABASE_MAX_CONNECTIONS=20
DATABASE_MIN_CONNECTIONS=5
DATABASE_IDLE_TIMEOUT=30000
DATABASE_CONNECTION_TIMEOUT=10000
DATABASE_STATEMENT_TIMEOUT=30000
DATABASE_QUERY_TIMEOUT=30000
DATABASE_POOL_SIZE=10
DATABASE_ACQUIRE_TIMEOUT=60000
DATABASE_SYNCHRONIZE=false
DATABASE_LOGGING=false

# ============================================
# REDIS CONFIGURATION
# ============================================
REDIS_HOST=localhost
REDIS_PORT=6379
REDIS_PASSWORD=
REDIS_DB=0
REDIS_KEY_PREFIX=haystack:
REDIS_MAX_RETRIES=3
REDIS_RETRY_DELAY=1000
REDIS_CONNECT_TIMEOUT=10000
REDIS_COMMAND_TIMEOUT=5000
REDIS_DEFAULT_TTL=3600
REDIS_IDEMPOTENCY_TTL=86400
REDIS_LOCK_TTL=30
REDIS_CACHE_TTL_PAYMENT=300
REDIS_CACHE_TTL_PROVIDER=60
REDIS_CACHE_TTL_TENANT=900
REDIS_RATE_LIMIT_TEST_REQUESTS=100
REDIS_RATE_LIMIT_TEST_WINDOW=3600
REDIS_RATE_LIMIT_LIVE_REQUESTS=10000
REDIS_RATE_LIMIT_LIVE_WINDOW=3600


# ============================================
# QUEUE CONFIGURATION
# ============================================
# Queue uses a separate Redis DB (default: 0, same as main Redis)
# For production, consider using a different Redis DB number
QUEUE_REDIS_DB=0
QUEUE_DEFAULT_ATTEMPTS=3
QUEUE_BACKOFF_TYPE=exponential
QUEUE_BACKOFF_DELAY=2000
QUEUE_REMOVE_ON_COMPLETE_AGE=86400
QUEUE_REMOVE_ON_COMPLETE_COUNT=1000
QUEUE_REMOVE_ON_FAIL_AGE=604800
QUEUE_EMAIL_CONCURRENCY=5
QUEUE_WEBHOOK_CONCURRENCY=10
QUEUE_PAYMENT_RETRY_CONCURRENCY=3
QUEUE_RECONCILIATION_CONCURRENCY=2


# ============================================
# LOGGING CONFIGURATION
# ============================================
LOG_LEVEL=info
LOG_PRETTY=true
LOG_FILE_ENABLED=true
LOG_DIR=logs

# ============================================
# SECURITY CONFIGURATION
# ============================================
# ENCRYPTION_KEY=your-encryption-key-for-provider-credentials

# ============================================
# REQUIRED - Must be set
# ============================================
JWT_SECRET=your-secret-key-change-in-production
JWT_EXPIRES_IN=15m
JWT_REFRESH_SECRET=your-refresh-secret-change-in-production
JWT_REFRESH_EXPIRES_IN=7d

# ============================================
# EMAIL CONFIGURATION
# ============================================
EMAIL_DEFAULT_PROVIDER=brevo
EMAIL_FROM_NAME=Haystack
EMAIL_FROM_EMAIL=noreply@haystack.com
EMAIL_REPLY_TO=support@haystack.com
EMAIL_TEMPLATES_DIRECTORY=src/modules/email/templates
EMAIL_DEFAULT_LOCALE=en
BREVO_API_KEY=your-brevo-api-key-here
BREVO_API_URL=https://api.brevo.com/v3
BREVO_RATE_LIMIT=300
EMAIL_RETRY_MAX_ATTEMPTS=3
EMAIL_RETRY_BACKOFF_DELAY=2000
EMAIL_TRACKING_ENABLED=true
EMAIL_TRACK_OPENS=false
EMAIL_TRACK_CLICKS=false

# ============================================
# DOCKER/TEST FLAGS (Optional)
# ============================================
# AUTO_MIGRATE=false
# WAIT_FOR_DB=false
# WAIT_FOR_REDIS=false